{"version":3,"file":"gateways_modal.min.js","sources":["../src/gateways_modal.js"],"sourcesContent":["/**\n * This module is responsible for ExpressPay content in the gateways modal.\n *\n * @module     paygw_expresspay/gateway_modal\n * @copyright  LLC TriIncom <info@express-pay.by>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport * as Repository from './repository';\nimport Templates from 'core/templates';\nimport ModalFactory from 'core/modal_factory';\n\n/**\n * Creates and shows a modal that contains a placeholder.\n *\n * @returns {Promise<Modal>}\n */\nconst showModalWithPlaceholder = async () => {\n    const modal = await ModalFactory.create({\n        body: await Templates.render('paygw_expresspay/expresspay_button_placeholder', {})\n    });\n    modal.show();\n    return modal;\n};\n\n/**\n * Process the payment.\n *\n * @param {string} component Name of the component that the itemId belongs to\n * @param {string} paymentArea The area of the component that the itemId belongs to\n * @param {number} itemId An internal identifier that is used by the component\n * @param {string} description Description of the payment\n * @returns {Promise<string>}\n */\n export const process = (component, paymentArea, itemId, description) => {\n    return showModalWithPlaceholder()\n        .then(modal => {\n            return Repository.createPayment(component, paymentArea, itemId, description)\n                .then(result => {\n                    if (result.success) {\n                        location.href = result.redirecturl;\n                        // Return a promise that is never going to be resolved.\n                        return new Promise(() => null);\n                    }else {\n                        return Promise.reject(result.message);\n                    }\n                }).catch(e => {\n                    modal.hide();\n                    return Promise.reject(e);\n                });\n        });\n};\n"],"names":["Repository","_interopRequireWildcard","_templates","_interopRequireDefault","_modal_factory","_ref","showModalWithPlaceholder","_regeneratorRuntime","mark","_callee","modal","wrap","_context","prev","next","t0","ModalFactory","default","Templates","render","t1","sent","t2","body","create","call","show","abrupt","stop","apply","this","arguments","component","paymentArea","itemId","description","then","createPayment","result","success","location","href","redirecturl","Promise","reject","message","catch","e","hide"],"mappings":"qiWAQAA,0pBAAAC,CAAAD,YACAE,WAAAC,uBAAAD,YACAE,eAAAD,uBAAAC,gBAOA,OAAiCC,KAA3BC,6BAA2BC,sBAAAC,MAAA,SAAAC,UAAA,IAAAC,MAAA,OAAAH,sBAAAI,MAAA,SAAAC,UAAA,OAAA,OAAAA,SAAAC,KAAAD,SAAAE,MAAA,KAAA,EAAA,OAAAF,SAAAG,GACTC,eADSC,QAAAL,SAAAE,KAAA,EAEbI,mBAAUC,OAAO,iDAAkD,IAFtD,KAAA,EAAA,OAAAP,SAAAQ,GAAAR,SAAAS,KAAAT,SAAAU,GAAA,CAEzBC,KAFyBX,SAAAQ,IAAAR,SAAAE,KAAA,EAAAF,SAAAG,GACIS,OADJC,KAAAb,SAAAG,GAAAH,SAAAU,IAAA,KAAA,EAAA,OACvBZ,MADuBE,SAAAS,MAIvBK,OAJuBd,SAAAe,OAAA,SAKtBjB,OALsB,KAAA,GAAA,IAAA,MAAA,OAAAE,SAAAgB,UAAAnB,YAAAJ,oTAAH,WAAA,OAAAA,KAAAwB,MAAAC,KAAAC,8BAiBN,SAACC,UAAWC,YAAaC,OAAQC,aACrD,OAAO7B,2BACF8B,MAAK,SAAA1B,OACF,OAAOV,WAAWqC,cAAcL,UAAWC,YAAaC,OAAQC,aAC3DC,MAAK,SAAAE,QACF,OAAIA,OAAOC,SACPC,SAASC,KAAOH,OAAOI,YAEhB,IAAIC,SAAQ,WAAA,OAAM,SAElBA,QAAQC,OAAON,OAAOO,YAElCC,OAAM,SAAAC,GAEL,OADArC,MAAMsC,OACCL,QAAQC,OAAOG"}